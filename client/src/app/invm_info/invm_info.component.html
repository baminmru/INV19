<!--Error dialogue-->
<amexio-window amexioColorPalette [color-palette]="'amexio-theme-color2'" [gradient]="true"  [show-window]="errorFlag"
            [header]="true"
			   [footer]="true" 
			   [draggable]="false" 
			   [vertical-position]="'center'" 
			   [horizontal-position]="'center'" 
			   [closable]="false"
            amexioThemeStyle  [theme-style]="'round-edge'"    >
	<amexio-header>
        <i class="fa fa-exclamation-triangle"></i> Ошибка
      </amexio-header>
	   <amexio-body>
        <amexio-row>
          <amexio-column [size]="11">
		  <span style="color:red">{{errorMessage}}</span>
		  </amexio-column>
        </amexio-row>
	</amexio-body> 
	<amexio-action> 
	<amexio-row> 
	<amexio-column size="11"> 
     <amexio-button amexioThemeStyle [theme-style]="'round-edge'"    [label]="'Ok'" (onClick)="errorFlag=false" [type]="'red'" [tooltip]="'Ok'" [icon]="'fa fa-exclamation-triangle'"></amexio-button>
	</amexio-column> 
	</amexio-row> 
	</amexio-action> 
</amexio-window>
<!-- edit row pane -->	 
 <amexio-window amexioColorPalette [color-palette]="'amexio-theme-color2'" [gradient]="true"  
        [closable]="false" [maximize]="true" 
        [vertical-position]="'center'"    
        [horizontal-position]="'center'"  
        [draggable]="false" 
        [remember-window-position]="true" 
        [width]="'auto'"  
        amexioThemeStyle  [theme-style]="'round-edge'"  
        [show-window]="opened  && errorFlag==false" 
        [header]="true" 
        [footer]="true" > 
	  <amexio-header> 
        {{formMsg}} История::История 
<amexio-box *ngIf="valid==false" border-color ="red" border="all" padding="true" background-color="yellow">
	<amexio-label font-color="red"  border="bottom">Ошибка заполнения формы</amexio-label>
</amexio-box>
      </amexio-header> 
     <amexio-body> 
     <amexio-row><amexio-column size="12" >
<amexio-label 
            [size]="'small-bold'" font-color="BLACK" 
>Из ячейки</amexio-label>
	 <amexio-dropdown 
	 [place-holder] = "'Из ячейки'"
	 name ="fromcell"
            [allow-blank]="false" [error-msg] ="'Не задано: Из ячейки'" 
	 
	 [display-field]="'name'"
	 [value-field]="'id'"
	 [data]="AppService.Comboinvwh_cell"
	 
	 [(ngModel)]="currentinvm_info.fromcell"
	 >
  </amexio-dropdown>
     </amexio-column></amexio-row>
     <amexio-row><amexio-column size="12" >
<amexio-label 
            [size]="'small'" font-color="BLUE" 
>В ячейку</amexio-label>
	 <amexio-dropdown 
	 [place-holder] = "'В ячейку'"
	 name ="toCell"
            [allow-blank]="true" 
	 
	 [display-field]="'name'"
	 [value-field]="'id'"
	 [data]="AppService.Comboinvwh_cell"
	 
	 [(ngModel)]="currentinvm_info.toCell"
	 >
  </amexio-dropdown>
     </amexio-column></amexio-row>
     <amexio-row><amexio-column size="12" >
<amexio-label 
            [size]="'small'" font-color="BLUE" 
>В отдел</amexio-label>
	 <amexio-dropdown 
	 [place-holder] = "'В отдел'"
	 name ="theDep"
            [allow-blank]="true" 
	 
	 [display-field]="'name'"
	 [value-field]="'id'"
	 [data]="AppService.Comboinvd_dep"
	 
	 [(ngModel)]="currentinvm_info.theDep"
	 >
  </amexio-dropdown>
     </amexio-column></amexio-row>
     <amexio-row><amexio-column size="12" >
<amexio-label 
            [size]="'small'" font-color="BLUE" 
>Запчасть</amexio-label>
	 <amexio-dropdown 
	 [place-holder] = "'Запчасть'"
	 name ="storepartid"
            [allow-blank]="true" 
	 
	 [display-field]="'name'"
	 [value-field]="'id'"
	 [data]="AppService.Comboinvp_data"
	 
	 [(ngModel)]="currentinvm_info.storepartid"
	 >
  </amexio-dropdown>
     </amexio-column></amexio-row>
     <amexio-row><amexio-column size="12" >
<amexio-label 
            [size]="'small-bold'" font-color="BLACK" 
>Количество</amexio-label>
 <amexio-number-input  [enable-popover]= "false"  name ="qty" 
                    [place-holder]="'Количество'" 
            [allow-blank]="false" [error-msg] ="'Не задано: Количество'" 
	 [(ngModel)]="currentinvm_info.qty"
                    > 
 </amexio-number-input>
     </amexio-column></amexio-row>
     <amexio-row><amexio-column size="12" >
<amexio-label 
            [size]="'small-bold'" font-color="BLACK" 
>Операция</amexio-label>
	 <amexio-dropdown 
	 [place-holder] = "'Операция'"
	 name ="theOP"
            [allow-blank]="false" [error-msg] ="'Не задано: Операция'" 
	 
	 [display-field]="'name'"
	 [value-field]="'id'"
	 [data]="AppService.Comboinvd_op"
	 
	 [(ngModel)]="currentinvm_info.theOP"
	 >
  </amexio-dropdown>
     </amexio-column></amexio-row>
     <amexio-row><amexio-column size="12" >
<amexio-label 
            [size]="'small-bold'" font-color="BLACK" 
>Время операции</amexio-label>
  <amexio-date-time-picker    
        [time-picker]="true"  
        [date-picker]="true"  
            [required]="true" 
        [(ngModel)]="currentinvm_info.optime"> 
 </amexio-date-time-picker> 
     </amexio-column></amexio-row>
     <amexio-row><amexio-column size="12" >
<amexio-label 
            [size]="'small'" font-color="BLUE" 
>Оператор</amexio-label>
	 <amexio-dropdown 
	 [place-holder] = "'Оператор'"
	 name ="theUser"
            [allow-blank]="true" 
	 
	 [display-field]="'name'"
	 [value-field]="'id'"
	 [data]="AppService.ComboxUserInfo"
	 
	 [(ngModel)]="currentinvm_info.theUser"
	 >
  </amexio-dropdown>
     </amexio-column></amexio-row>
	</amexio-body> 
	<amexio-action> 
	<amexio-row> 
	<amexio-column size="12"> 
     <amexio-button amexioThemeStyle [theme-style]="'round-edge'"   [label]="'Отмена'" (onClick)="opened = false;  refreshinvm_info();" [type]="'secondary'" [tooltip]="'Отмена'" [icon]="'fa fa-times'"></amexio-button>
     <amexio-button amexioThemeStyle [theme-style]="'round-edge'"   [label]="'Сохранить'" (onClick)="save(currentinvm_info)" [type]="'success'" [tooltip]="'Сохранить'" [icon]="'fa fa-save'"></amexio-button>
	</amexio-column> 
	</amexio-row> 
	</amexio-action> 
</amexio-window> 
   
<!-- list Of row pane --> 
<amexio-card  amexioColorPalette [color-palette]="'classic'" [gradient]="true" [show]="true" [header] ="true" [footer] ="false" > 
    <amexio-header> 
	<amexio-row> 
		<amexio-column size="12" > 
		<!-- 
<amexio-button amexioThemeStyle [theme-style]="'round-edge'"  [label]="'Создать'" [type]="'secondary'" [tooltip]="'Создать новую запись'" [icon]="'fa fa-plus'" (onClick)="onNew()"></amexio-button>
		<amexio-button amexioThemeStyle [theme-style]="'round-edge'"  [disabled]="currentinvm_info.invm_infoId==null" [label]="'Изменить'" (onClick)="onEdit(currentinvm_info)" [type]="'secondary'" [tooltip]="'Изменить запись'" [icon]="'fa fa-edit'"></amexio-button>
     <amexio-button amexioThemeStyle [theme-style]="'round-edge'"  [disabled]="currentinvm_info.invm_infoId==null" [label]="'Удалить'" (onClick)="onDelete(currentinvm_info)" [type]="'secondary'" [tooltip]="'Удалить запись'" [icon]="'fa fa-trash'"></amexio-button>
-->
     <amexio-button amexioThemeStyle [theme-style]="'round-edge'"   [label]="'Обновить'" (onClick)="refreshinvm_info()" [type]="'secondary'" [tooltip]="'Обновить данные'" [icon]="'fa fa-refresh'"></amexio-button>
     <amexio-button amexioThemeStyle [theme-style]="'round-edge'"   [label]="'Экспорт'" (onClick)="exportXSLX()" [type]="'secondary'" [tooltip]="'Экспорт данных'" [icon]="'fa fa-cloud'"></amexio-button>
		</amexio-column>
	</amexio-row> 
	</amexio-header> 
	<amexio-body> 
		<amexio-datagrid amexioColorPalette [color-palette]="'vibrant'" [gradient]="true" 
		  [title]="'История::История'" 
		  [page-size] = "10" 
		  [enable-data-filter]="false" [global-filter]="true" 
		  [enable-checkbox]="false" 
		  [data]="invm_infoArray" 
		  (selectedRowData)="onSelect($event)" 
		  (rowSelect)="onSelect($event)"> 
		  <amexio-data-table-column [data-index]="'fromcell_name'" [data-type]="'string'" [hidden]="false" [text]="'Из ячейки'"></amexio-data-table-column> 
		  <amexio-data-table-column [data-index]="'toCell_name'" [data-type]="'string'" [hidden]="false" [text]="'В ячейку'"></amexio-data-table-column> 
		  <amexio-data-table-column [data-index]="'theDep_name'" [data-type]="'string'" [hidden]="false" [text]="'В отдел'"></amexio-data-table-column> 
		  <amexio-data-table-column [data-index]="'storepartid_name'" [data-type]="'string'" [hidden]="false" [text]="'Запчасть'"></amexio-data-table-column> 
		  <amexio-data-table-column [data-index]="'qty'" [data-type]="'number'" [hidden]="false" [text]="'Количество'"></amexio-data-table-column> 
		  <amexio-data-table-column [data-index]="'theOP_name'" [data-type]="'string'" [hidden]="false" [text]="'Операция'"></amexio-data-table-column> 
		  <amexio-data-table-column [data-index]="'optime'" [data-type]="'string'" [hidden]="false" [text]="'Время операции'"></amexio-data-table-column> 
		  <amexio-data-table-column [data-index]="'theUser_name'" [data-type]="'string'" [hidden]="false" [text]="'Оператор'"></amexio-data-table-column> 
		</amexio-datagrid> 
	</amexio-body> 
</amexio-card> 
 
<!-- confirm delete  dialog -->  
<amexio-window amexioColorPalette [color-palette]="'amexio-theme-color2'" [gradient]="true"   [(show-window)]="confirmOpened" [closable]="false" [header]="true" [footer]="true" >  
     
    <amexio-header>
Удалить строку:  История::История ?
    </amexio-header> 
    <amexio-body> 
            Удалить запись: {{ ( (currentinvm_info.storepartid_name +'; '+  currentinvm_info.qty +'; '+  currentinvm_info.theOP_name||'').length >100 ? (currentinvm_info.storepartid_name +'; '+  currentinvm_info.qty +'; '+  currentinvm_info.theOP_name||'').substr(0,100)+'...' : (currentinvm_info.storepartid_name +'; '+  currentinvm_info.qty +'; '+  currentinvm_info.theOP_name||'')) | removehtmltag }}?  
	</amexio-body> 
	<amexio-action> 
	<amexio-row> 
	<amexio-column size="12"> 
     <amexio-button amexioThemeStyle [theme-style]="'round-edge'"   [label]="'Отмена'" (onClick)="confirmOpened = false" [type]="'secondary'" [tooltip]="'Отмена'" [icon]="'fa fa-times'"></amexio-button>
     <amexio-button amexioThemeStyle [theme-style]="'round-edge'"   [label]="'Удалить'" (onClick)="onConfirmDeletion()" [type]="'danger'" [tooltip]="'Удалить'" [icon]="'fa fa-trash'"></amexio-button>
	</amexio-column> 
	</amexio-row> 
	</amexio-action> 
</amexio-window> 
 
